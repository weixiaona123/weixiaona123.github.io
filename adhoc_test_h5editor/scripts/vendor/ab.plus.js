!function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,r){/*@version: 5.0.1
							@date: 2018-11-29 12:8:26*/
var o=function(e){return null!=e&&void 0!=e},a=function(e){return!o(e)},s=function(e){return e===!0},c=function(e){return e===!1},u=function(e){return"function"==typeof e},l=function(e){return"number"==typeof e},d=function(e){return"[object array]"===Object.prototype.toString.call(e).toLowerCase()},h=function(e){return"object"==("undefined"==typeof e?"undefined":i(e))&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&null!=e},f=function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];e.apply(t,i.concat(r))}},p=function(){var t;e.console&&u(e.console.log)?(t=e.console).log.apply(t,arguments):null},m=function(){var t;e.console&&u(e.console.warn)?(t=e.console).warn.apply(t,arguments):null},g=function(t){e.console&&u(e.console.warn)?e.console.warn(t):null};e.JSON?null:e.JSON={};var v={stringify:e.JSON.stringify||function(e){var t="undefined"==typeof e?"undefined":i(e);if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],a=e&&e.constructor==Array;for(n in e)r=e[n],t="undefined"==typeof r?"undefined":i(r),"string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=v.stringify(r)),"function"!=t&&o.push((a?"":'"'+n+'":')+String(r));return(a?"[":"{")+String(o)+(a?"]":"}")},parse:e.JSON.parse||function(e){return eval("("+e+")")}},w={each:function(e,t){var n=e.length;if(n)for(var i=0;i<n&&t(e[i],i)!==!1;i++);},indexOf:function(e,t){var n=e.length>>>0,i=Number(arguments[1])||0;for(i=i<0?Math.ceil(i):Math.floor(i),i<0&&(i+=n);i<n;i++)if(i in e&&e[i]===t)return i;return-1},uniquePush:function(e,t){w.indexOf(e,t)===-1&&e.push(t)}},y={keys:Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},assign:Object.assign||function(){for(var e=arguments[0],t=1,n=arguments.length;t<n;t++)for(var i in arguments[t])e[i]=arguments[t][i];return e}},b=function(){function e(e){return u(e)||h(e)}function n(e){return"function"==typeof e}function r(e){Y=e}function o(e){J=e}function a(){return function(){return process.nextTick(f)}}function s(){return"undefined"!=typeof G?function(){G(f)}:d()}function c(){var e=0,t=new ee(f),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function l(){var e=new MessageChannel;return e.port1.onmessage=f,function(){return e.port2.postMessage(0)}}function d(){var e=setTimeout;return function(){return e(f,1)}}function f(){for(var e=0;e<W;e+=2){var t=ie[e],n=ie[e+1];t(n),ie[e]=void 0,ie[e+1]=void 0}W=0}function p(){try{var e=require,t=e("vertx");return G=t.runOnLoop||t.runOnContext,s()}catch(n){return d()}}function m(e,t){var n=arguments,i=this,r=new this.constructor(v);void 0===r[oe]&&j(r);var o=i._state;return o?!function(){var e=n[o-1];J(function(){return P(o,r,e,i._result)})}():T(i,r,e,t),r}function g(e){var t=this;if(e&&"object"==("undefined"==typeof e?"undefined":i(e))&&e.constructor===t)return e;var n=new t(v);return A(n,e),n}function v(){}function w(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function b(e){try{return e.then}catch(t){return ue.error=t,ue}}function x(e,t,n,i){try{e.call(t,n,i)}catch(r){return r}}function _(e,t,n){J(function(e){var i=!1,r=x(n,t,function(n){i||(i=!0,t!==n?A(e,n):C(e,n))},function(t){i||(i=!0,O(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,O(e,r))},e)}function k(e,t){t._state===se?C(e,t._result):t._state===ce?O(e,t._result):T(t,void 0,function(t){return A(e,t)},function(t){return O(e,t)})}function E(e,t,i){t.constructor===e.constructor&&i===m&&t.constructor.resolve===g?k(e,t):i===ue?(O(e,ue.error),ue.error=null):void 0===i?C(e,t):n(i)?_(e,t,i):C(e,t)}function A(t,n){t===n?O(t,w()):e(n)?E(t,n,b(n)):C(t,n)}function S(e){e._onerror&&e._onerror(e._result),N(e)}function C(e,t){e._state===ae&&(e._result=t,e._state=se,0!==e._subscribers.length&&J(N,e))}function O(e,t){e._state===ae&&(e._state=ce,e._result=t,J(S,e))}function T(e,t,n,i){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+se]=n,r[o+ce]=i,0===o&&e._state&&J(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)i=t[a],r=t[a+n],i?P(n,i,r,o):r(o);e._subscribers.length=0}}function I(){this.error=null}function L(e,t){try{return e(t)}catch(n){return le.error=n,le}}function P(e,t,i,r){var o=n(i),a=void 0,s=void 0,c=void 0,u=void 0;if(o){if(a=L(i,r),a===le?(u=!0,s=a.error,a.error=null):c=!0,t===a)return void O(t,y())}else a=r,c=!0;t._state!==ae||(o&&c?A(t,a):u?O(t,s):e===se?C(t,a):e===ce&&O(t,a))}function M(e,t){try{t(function(t){A(e,t)},function(t){O(e,t)})}catch(n){O(e,n)}}function D(){return de++}function j(e){e[oe]=de++,e._state=void 0,e._result=void 0,e._subscribers=[]}function R(e,t){this._instanceConstructor=e,this.promise=new e(v),this.promise[oe]||j(this.promise),$(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?C(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&C(this.promise,this._result))):O(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function U(e){return new R(this,e).promise}function K(e){var t=this;return new t($(e)?function(n,i){for(var r=e.length,o=0;o<r;o++)t.resolve(e[o]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function F(e){var t=this,n=new t(v);return O(n,e),n}function B(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function H(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function z(e){this[oe]=D(),this._result=this._state=void 0,this._subscribers=[],v!==e&&("function"!=typeof e&&B(),this instanceof z?M(this,e):H())}function X(){var e=void 0;if("undefined"!=typeof t)e=t;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(n){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;if(i){var r=null;try{r=Object.prototype.toString.call(i.resolve())}catch(n){}if("[object Promise]"===r&&!i.cast)return}e.Promise=z}var V=void 0;V=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var $=V,W=0,G=void 0,Y=void 0,J=function(e,t){ie[W]=e,ie[W+1]=t,W+=2,2===W&&(Y?Y(f):re())},Q="undefined"!=typeof window?window:void 0,Z=Q||{},ee=Z.MutationObserver||Z.WebKitMutationObserver,te="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),ne="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ie=new Array(1e3),re=void 0;re=te?a():ee?c():ne?l():void 0===Q&&"function"==typeof require?p():d();var oe=Math.random().toString(36).substring(16),ae=void 0,se=1,ce=2,ue=new I,le=new I,de=0;return R.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ae&&n<e;n++)this._eachEntry(t[n],n)},R.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===g){var r=b(e);if(r===m&&e._state!==ae)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===z){var o=new n(v);E(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},R.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ae&&(this._remaining--,e===ce?O(i,n):this._result[t]=n),0===this._remaining&&C(i,this._result)},R.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){return n._settledAt(se,t,e)},function(e){return n._settledAt(ce,t,e)})},z.all=U,z.race=K,z.resolve=g,z.reject=F,z._setScheduler=r,z._setAsap=o,z._asap=J,z.prototype={constructor:z,then:m,_catch:function(e){return this.then(null,e)}},z.polyfill=X,z.Promise=z,z},x=b(),_=e.XMLHttpRequest,k=function(t){var n=t.url,i=t.data,r=t.timeout;return a(r)?r=3e3:"",new x(function(t,s){try{if(a(i)||a(i.app_key))return s("Please pass your appKey in the init method");var c=new _;"withCredentials"in c||(o(e.XDomainRequest)?(c=new e.XDomainRequest,n=n.replace(/http\w*\:/,e.location.protocol)):s("construct $request failed")),c.onload=function(){t(c.responseText)},c.onerror=function(){s(c.responseText||"network failed")},setTimeout(function(){s(n+" timeout")},r),c.open("POST",n,!0),u(c.setRequestHeader)?c.setRequestHeader("Content-Type","application/json;charset=UTF-8"):"",c.send(v.stringify(i))}catch(l){s(l)}})},E={getAllParams:function(){var t=e.location.search,n={};if(t.indexOf("?")!=-1)for(var i=t.replace(/^\?/,"").split("&"),r=i.length,o=0,a=void 0;o<r;o++)i[o]&&(a=i[o].split("="),n[a[0]]=a[1]);return n},getQueryString:function(t,n){if(n=n||e.location.search.substr(1)){var i=null;return w.each(n.split("&"),function(e){if(0==e.indexOf(t+"="))return i=e.split("=")[1],!1}),o(i)?i:null}return null},getProtocol:function(t){if(a(t))return e.location.protocol;var n=t.match(/http\w*\:/);return n&&1==n.length?n[0]:(m("get protocol failed"),"")},getHost:function(t){return a(t)?e.location.host:(t=t.replace(/http\w*\:\/\//,""),t.indexOf("?")>0?t=t.substr(0,t.indexOf("?")):"",t.indexOf("#")>0?t=t.substr(0,t.indexOf("#")):"",t.split("/")[0])},getPath:function(t){if(a(t))return e.location.pathname;var n=t.replace(/http\w*\:\/\//).split("/");return n.shift(),"/"+n.join("/").replace(/[\?|\#]\S*/,"")},getSearch:function(t){if(a(t))return e.location.search;var n=t.split("?")[1];return n?"?"+n.replace(/\#\S+$/,""):""},getHash:function(t){if(a(t))return e.location.hash;var n=t.split("#")[1];return n?"#"+n:""}},A=function(e){if(e){var t=encodeURIComponent(v.stringify(e)),n="https://zhtest.appadhoc.com/l.gif?m="+t+"&t="+Date.now(),i=document.createElement("img");i.src=n}},S="1.0",C=function(e){e+=S;for(var t=encodeURIComponent(e),n=t+"=",i=document.cookie.split(";"),r=0;r<i.length;r++){for(var o=i[r];" "==o.charAt(0);)o=o.substring(1);if(0===o.indexOf(t)){var a=o.substring(n.length,o.length);return decodeURIComponent(a)}}return null},O=function(e,t,n,i){e+=S;var r=n?1e3*n:31536e6,a=new Date((new Date).getTime()+r),s="; expires="+a.toUTCString(),c=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+"; path=/;";o(i)&&(c+="domain="+i+";"),document.cookie=c},T={set:O,get:C};try{e.localStorage.setItem("_adhoc_test_",1),T.setItem=function(t,n){e.localStorage.setItem(t,n)},T.getItem=function(t){return e.localStorage.getItem(t)},T.removeItem=function(t){return e.localStorage.removeItem(t)}}catch(N){T.setItem=function(){},T.getItem=function(){},T.removeItem=function(){}}var I={$:function(e){for(var t=e.match(/(\w|\-)+(?=\[)/g),n=e.match(/\d+(?=\])/g),i=document.body,r=0,o=n.length;r<o;r++){var s=t[r].toLowerCase(),c=n[r];if("body"!=s){if(!i)return null;for(var u=i.childNodes,l=-1,d=0,h=u.length;d<h;d++){var f=u[d];if(1===f.nodeType&&f.nodeName.toLowerCase()==s){l++;var p=f.getAttribute(D);if(p==c){i=f,l=p;break}if(a(p)&&l==c){i=f;break}}}if(l!=c){i=null;break}}}return i},addEvent:function(e,t,n,i,r,o){var a=e,s=!!o&&o,c=null;r&&(a=r===!0?i:r),c=function(e){return n.call(a,e||window.event)};try{e.addEventListener(t,c,s)}catch(u){try{e.attachEvent("on"+t,c)}catch(l){e["on"+t]=c}}},findParentNodeByTag:function(e,t){for(;e!=document&&e.parentNode.tagName&&e.parentNode.tagName.toLowerCase()!=t;)e=e.parentNode;return e==document||e.parentNode==document?null:e.parentNode},next:function ke(e){var ke=e.nextSibling;if(!ke)return null;if("#text"===ke.nodeName&&3===ke.nodeType)return ke;for(;ke&&1!=ke.nodeType;)ke=ke.nextSibling;return ke},ready:function(e){"function"==typeof e&&setTimeout(function(){return"complete"===r.readyState?e():I.ready(e)},0)},getChildren:function(e,t){for(var n=[],i=e.childNodes,r=0,o=i.length;r<o;r++){var a=i[r];1===a.nodeType&&a.tagName&&"style"!=a.tagName.toLowerCase()&&"script"!=a.tagName.toLowerCase()&&(t?a.tagName&&a.tagName.toLowerCase&&t==a.tagName.toLowerCase()&&n.push(a):n.push(a))}return n},getDoms:function(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,n=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var i=t.exec(e);return document.getElementById(i[2])}if(n.test(e)){for(var r=n.exec(e),o=document.getElementsByTagName("*"),a=[],s=0,c=o.length;s<c;s++)o[s].className.match(new RegExp("(\\s|^)"+r[2]+"(\\s|$)"))&&a.push(o[s]);return a}},querySelectorPolyfill:function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t,n=document.createElement("style"),i=[];for(document.documentElement.firstChild.appendChild(n),document._qsa=[],n.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),n.parentNode.removeChild(n);document._qsa.length;)t=document._qsa.shift(),t.style.removeAttribute("x-qsa"),i.push(t);return document._qsa=null,i}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null})},isChildsOnlyText:function(e){for(var t=e.childNodes,n=void 0,i=0;i<t.length;i++)"#text"!=t[i].nodeName?"BR"!=t[i].nodeName&&(n=!1):n=!0;return n}},L=void 0,P={setName:function(t){e.name=e.ADHOC_WINDOW_NAME=L=t},getName:function(){return L||document.referrer}};P.setName(e.name);var M="data-ab-origin-sequence",D="data-ab-origin-tag-sequence",j=void 0;!function(){var e="0.7.10",t="",n="?",r="function",o="undefined",a="object",s="string",c="major",u="model",l="name",d="type",h="vendor",f="version",p="architecture",m="console",g="mobile",v="tablet",w="smarttv",y="wearable",b="embedded",x={extend:function(e,t){var n={};for(var i in e)t[i]&&t[i].length%2===0?n[i]=t[i].concat(e[i]):n[i]=e[i];return n},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return("undefined"==typeof e?"undefined":i(e))===s?e.split(".")[0]:void 0}},_={rgx:function(){for(var e,t,n,s,c,u,l,d=0,h=arguments;d<h.length&&!u;){var f=h[d],p=h[d+1];if(("undefined"==typeof e?"undefined":i(e))===o){e={};for(s in p)p.hasOwnProperty(s)&&(c=p[s],("undefined"==typeof c?"undefined":i(c))===a?e[c[0]]=void 0:e[c]=void 0)}for(t=n=0;t<f.length&&!u;)if(u=f[t++].exec(this.getUA()))for(s=0;s<p.length;s++)l=u[++n],c=p[s],("undefined"==typeof c?"undefined":i(c))===a&&c.length>0?2==c.length?i(c[1])==r?e[c[0]]=c[1].call(this,l):e[c[0]]=c[1]:3==c.length?i(c[1])!==r||c[1].exec&&c[1].test?e[c[0]]=l?l.replace(c[1],c[2]):void 0:e[c[0]]=l?c[1].call(this,l,c[2]):void 0:4==c.length&&(e[c[0]]=l?c[3].call(this,l.replace(c[1],c[2])):void 0):e[c]=l?l:void 0;d+=2}return e},str:function(e,t){for(var r in t)if(i(t[r])===a&&t[r].length>0){for(var o=0;o<t[r].length;o++)if(x.has(t[r][o],e))return r===n?void 0:r}else if(x.has(t[r],e))return r===n?void 0:r;return e}},k={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[l,f],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[l,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[l,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[l,f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[l,"IE"],f],[/(edge)\/((\d+)?[\w\.]+)/i],[l,f],[/(yabrowser)\/([\w\.]+)/i],[[l,"Yandex"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[l,/_/g," "],f],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[l,f],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[l,"UCBrowser"],f],[/(dolfin)\/([\w\.]+)/i],[[l,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[l,"Chrome"],f],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[f,[l,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[f,[l,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[f,[l,"Facebook"]],[/fxios\/([\w\.-]+)/i],[f,[l,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[l,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[l,[f,_.str,k.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[l,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[l,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[l,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[p,"amd64"]],[/(ia32(?=;))/i],[[p,x.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[p,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[p,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[p,/ower/,"",x.lowerize]],[/(sun4\w)[;\)]/i],[[p,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[p,x.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[u,h,[d,v]],[/applecoremedia\/[\w\.]+ \((ipad)/],[u,[h,"Apple"],[d,v]],[/(apple\s{0,1}tv)/i],[[u,"Apple TV"],[h,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[h,u,[d,v]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[u,[h,"Amazon"],[d,v]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[u,_.str,k.device.amazon.model],[h,"Amazon"],[d,g]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[u,h,[d,g]],[/\((ip[honed|\s\w*]+);/i],[u,[h,"Apple"],[d,g]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[h,u,[d,g]],[/\(bb10;\s(\w+)/i],[u,[h,"BlackBerry"],[d,g]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[u,[h,"Asus"],[d,v]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[h,"Sony"],[u,"Xperia Tablet"],[d,v]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[h,"Sony"],[u,"Xperia Phone"],[d,g]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[h,u,[d,m]],[/android.+;\s(shield)\sbuild/i],[u,[h,"Nvidia"],[d,m]],[/(playstation\s[34portablevi]+)/i],[u,[h,"Sony"],[d,m]],[/(sprint\s(\w+))/i],[[h,_.str,k.device.sprint.vendor],[u,_.str,k.device.sprint.model],[d,g]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[h,u,[d,v]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|oppo|vivo|coolpad|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[h,[u,/_/g," "],[d,g]],[/(nexus\s9)/i],[u,[h,"HTC"],[d,v]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[u,[h,"Microsoft"],[d,m]],[/(kin\.[onetw]{3})/i],[[u,/\./g," "],[h,"Microsoft"],[d,g]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[u,[h,"Motorola"],[d,g]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[u,[h,"Motorola"],[d,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[h,"Samsung"],u,[d,v]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[h,"Samsung"],u,[d,g]],[/(samsung);smarttv/i],[h,u,[d,w]],[/\(dtv[\);].+(aquos)/i],[u,[h,"Sharp"],[d,w]],[/sie-(\w+)*/i],[u,[h,"Siemens"],[d,g]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[h,"Nokia"],u,[d,g]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[u,[h,"Acer"],[d,v]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[h,"LG"],u,[d,v]],[/(lg) netcast\.tv/i],[h,u,[d,w]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[u,[h,"LG"],[d,g]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[u,[h,"Lenovo"],[d,v]],[/linux;.+((jolla));/i],[h,u,[d,g]],[/((pebble))app\/[\d\.]+\s/i],[h,u,[d,y]],[/android.+;\s(glass)\s\d/i],[u,[h,"Google"],[d,y]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i,/android.+(redmi .+)\s+build/i],[[u,/_/g," "],[h,"Xiaomi"],[d,g]],[/android.+(mz-[\w]+)\s+.*build/i],[[u,/_/g," "],[h,"Meizu"],[d,g]],[/android.+(moto .+)\s+build/i],[[u,/_/g," "],[h,"Motorola"],[d,g]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[d,x.lowerize],h,u]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[l,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[l,f],[/rv\:([\w\.]+).*(gecko)/i],[f,l]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[l,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[l,[f,_.str,k.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[l,"Windows"],[f,_.str,k.os.windows.version]],[/\((bb)(10);/i],[[l,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[l,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[l,"Symbian"],f],[/\((series40);/i],[l],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[l,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[[l,"Linux"],f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[l,"Chromium OS"],f],[/(sunos)\s?([\w\.]+\d)*/i],[[l,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[l,f],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[l,"iOS"],[f,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[l,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[l,f]]},A=function D(e,n){if(!(this instanceof D))return new D(e,n);var i=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t),r=n?x.extend(E,n):E;return this.getBrowser=function(){var e=_.rgx.apply(this,r.browser);return e.major=x.major(e.version),e},this.getCPU=function(){return _.rgx.apply(this,r.cpu)},this.getDevice=function(){return _.rgx.apply(this,r.device)},this.getEngine=function(){return _.rgx.apply(this,r.engine)},this.getOS=function(){return _.rgx.apply(this,r.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return i},this.setUA=function(e){return i=e,this},this};A.VERSION=e,A.BROWSER={NAME:l,MAJOR:c,VERSION:f},A.CPU={ARCHITECTURE:p},A.DEVICE={MODEL:u,VENDOR:h,TYPE:d,CONSOLE:m,MOBILE:g,SMARTTV:w,TABLET:v,WEARABLE:y,EMBEDDED:b},A.ENGINE={NAME:l,VERSION:f},A.OS={NAME:l,VERSION:f};var S=function(e){if(!e)return"";var t=e.split("."),n="";return t.length>0&&(n+=t[0]),t.length>1&&(n+="."+t[1]),n},C=new A,O=C.getResult(),T={},N=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",I="",L="",P=N.indexOf("-");if(P>0&&(I=N.substr(P+1).toUpperCase(),N=N.substr(0,P),L=N+"_"+I),"iOS"==O.os.name?O.os.name="iPhone OS":"Android"==O.os.name?O.os.name="google_android":"Windows"==O.os.name&&"mobile"!=O.device.type?O.device.type="PC":"Mac OS"==O.os.name&&"mobile"!=O.device.type&&(O.device.type="Mac"),"Mobile Safari"==O.browser.name?O.browser.name="Safari":"IEMobile"==O.browser.name?O.browser.name="IE":"Opera Mini"==O.browser.name&&(O.browser.name="Opera"),T={sdk_api_version:"2.0",sdk_version:"5.0.1",OS:O.os.name||"",os_version:S(O.os.version),os_version_name:O.os.version||"",device_model:O.device.model||navigator.platform||"",country:I,language:N,locale:L,display_height:window.innerHeight||document.documentElement.clientHeight,display_width:window.innerWidth||document.documentElement.clientWidth,device_type:O.device.type||"",device_vendor:O.device.vendor||"",url:window.location.href,referrer:document.referrer,browser:O.browser.name||"",browser_version:S(O.browser.version),browser_version_name:O.browser.version||"",browser_engine:O.engine.name||""},!O.browser.name||!O.browser.version||!O.engine.name){var M=O.ua.match(/(bot|crawl|slurp|spider)/i);M&&(T.browser="__spider__")}j=T}();var R=j,q=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},U="ADHOC_MEMBERSHIP_CLIENT_ID",K=function(){function e(t,i){n(this,e);try{var r=T.get(U);this.id=o(i)?i:o(r)?r:q(),o(i)||o(r)||T.removeItem("ADHOC_EXP_INFO_"+t),o(i)&&o(r)&&i!=r&&T.removeItem("ADHOC_EXP_INFO_"+t),T.set(U,this.id)}catch(a){g(a)}}return e.prototype.getId=function(){return this.id},e.prototype.update=function(e){o(e)?this.id=e:null},e}(),F=function(t){return new x(function(n,i){try{e._adhoc_config_env_="production",e._adhoc_md5_=t;var o=r.createElement("script");o.onload=function(){n("editor ready")},o.onerror=function(){i("load editor failed")},o.setAttribute("charset","utf-8"),o.src=e.setAbtestingEditorUrl||"https://sdk.appadhoc.com/editor/adhoc-editor.js?v="+(new Date).getTime();var a=r.getElementsByTagName("head")[0];a.appendChild(o)}catch(s){i(s)}})},B=function(){function e(t){n(this,e),this.expList=[],this.usedFlagMap={},this.onMatch=t,this.use=f(this.use,this)}return e.prototype.setExpList=function(e){this.expList=e},e.prototype.use=function(e){var t=this;this.usedFlagMap.hasOwnProperty(e)||(this.usedFlagMap[e]=!0,w.each(this.expList,function(e,n){if(!h(e))return!0;var i=!0;w.each(e.flags,function(e){if(!t.usedFlagMap.hasOwnProperty(e))return i=!1,!1}),s(i)&&t.expList[n]&&t.onMatch(t.expList.splice(n,1)[0])}))},e}(),H=function(){function t(i){var r=this;n(this,t);var a=i.appKey,s=i.clientId,u=i.custom,l=i.onMatch,d=i.defaultFlags,h=i.noStorage,f=i.experimentCache;this.matchedExpIdsList=[],this.matchedExpsList=[],this.adhocMatchExp=new B(function(e){r.matchedExpIdsList.push(e.id),r.matchedExpsList.push(e),l(e)}),this.promise=new x(function(n,i){try{var r="ADHOC_EXP_INFO_"+a,l=T.getItem(r),p=!1;if(f&&o(l)&&c(h))try{var m=v.parse(e.decodeURIComponent(l));n(m),p=!0}catch(w){g(w)}k({url:t.protocol+"//experiment."+t.domain+"/get_flags_async",data:{app_key:a,client_id:s,summary:R,custom:u},timeout:t.timeout}).then(function(t){var i=v.parse(t);c(p)&&(p=!0,n(i)),c(h)&&T.setItem(r,e.encodeURIComponent(t))})._catch(function(e){c(p)&&(n({experiments:[],flags:d}),p=!0)})}catch(w){n({experiments:[],flags:d})}}).then(function(e){return r.adhocMatchExp.setExpList(e.experiments),{expInfoOrigin:e,flags:r.expInfo2FlagObj(e)}})._catch(function(e){return m("get flag failed!\n"+e),{expInfoOrigin:d,flags:r.expInfo2FlagObj({flags:d})}})}return t.prototype.getFlags=function(e){return this.promise.then(function(t){return u(e)&&e(t.flags),t}),this},t.prototype.getMatchedExpIds=function(){return this.matchedExpIdsList},t.prototype.getMatchedExps=function(){return this.matchedExpsList},t.prototype.expInfo2FlagObj=function(e){var t=e.flags,n=this.adhocMatchExp.use;return{get:function(e){return t.hasOwnProperty(e)&&n(e),t[e]},all:function(){return t}}},t}();H.domain="appadhoc.com",H.protocol=e.location.protocol,H.timeout=void 0;var z=function(){function e(t){n(this,e);var i=t.appKey,r=t.clientId,o=t.custom;this.appKey=i,this.clientId=r,this.custom=o,this.cachedStats=[]}return e.prototype.track=function(e,t,n,r){var o=this;d(t)||(t=[t]),w.each(t,function(t,r){var a=1;"number"==typeof n&&(a=n),"object"===("undefined"==typeof n?"undefined":i(n))&&n.hasOwnProperty("length")&&(a=r<n.length?n[r]:1);var s={key:t,value:a,timestamp:Math.round((new Date).getTime()/1e3),experiment_ids:e};o.cachedStats.push(s)}),u(r)?"":r=function(){},e.length>0?(this.send(e,this.cachedStats,r),this.cachedStats=[]):r("no matchedExpId")},e.prototype.send=function(t,n,i){w.each(n,function(e,i){n[i].experiment_ids=t}),""!=R.OS&&""!=R.browser_version&&""!=R.browser_engine&&window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("spider")<0&&k({url:e.protocol+"//tracker."+e.domain+"/tracker",timeout:e.timeout,data:{app_key:this.appKey,client_id:this.clientId,summary:R,custom:this.custom,stats:n}}).then(function(){i(null)})._catch(function(e){i(e)})},e}();z.domain="appadhoc.com",z.protocol=e.location.protocol,z.timeout=void 0;var X=function(){function e(){n(this,e);var t=r.createElement("style");t.setAttribute("type","text/css"),a(t.styleSheet)&&t.appendChild(r.createTextNode("")),r.getElementsByTagName("head")[0].appendChild(t),this.s=t,this.hiddenElementMap={}}return e.prototype.update=function(){var e=[];for(var t in this.hiddenElementMap)e.push(t);var n=0==e.length?"":e.join(",")+"{opacity:0 !important; filter:alpha(opacity=0) !important; background:none !important;visibility:hidden !important;}";this.s.styleSheet?this.s.styleSheet.cssText=n:this.s.innerHTML=n},e.prototype.hide=function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];w.each(n,function(t){e.hiddenElementMap[t]=!0}),this.update()},e.prototype.show=function(){var e=this;try{for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];0==n.length?this.hiddenElementMap={}:w.each(n,function(t){delete e.hiddenElementMap[t]}),this.update()}catch(r){g(r)}},e.prototype.xPath2Css=function(e){var t=e.match(/\w+(?=\[)/g);if("IE"==R.browser&&Math.floor(R.browser_version)<=8)return t.join(">");var n=e.match(/\d+(?=\])/g),i=[];return w.each(t,function(e,t){i.push(e+":nth-of-type("+(parseInt(n[t])+1)+")")}),i.join(">")},e.prototype.log=function(){console.log(this.s.styleSheet.cssText)},e}(),V=[],$=function(e,t){w.each(e,function(e){"domXpath"==e.mode?w.each(e.elemId,function(n){!function(e,n){var i=t.xPath2Css(e),r=function s(){var r=I.$(e);if(o(r)){r.setAttribute("data-adhoc-stat","true");var c=r.tagName.toLowerCase(),u=r.getAttribute("type");u?u=u.toLowerCase():null;var l=r.getAttribute("target"),d=r.getAttribute("href");"a"==c&&a(l)&&o(d)&&d.indexOf("http")>-1||"input"==c&&"submit"==u||"input"==c&&"image"==u||"button"==c&&"submit"==u?G(r,n,V):I.addEvent(r,"click",function(){adhoc("track",n,1,function(){},!0)}),t.show(i)}else setTimeout(s)};setTimeout(r)}(n,e.statName)}):w.each(e.doms,function(n){!function(e,n){var r=function s(){var r=void 0,c=void 0,u=void 0;switch(e.mode){case"domXpath":r=I.$(e.id),c=t.xPath2Css(e.id);break;case"class":u=e.id.split(" "),r=u.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):I.getDoms("."+e.id),c=u.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id;break;case"id":u=e.id.split(" "),r=u.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):document.getElementById(e.id),c=u.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id;break;default:r=document.querySelectorAll("["+e.mode+"='"+e.id+"']"),c="["+e.mode+"='"+e.id+"']"}if(o(r)&&"object"===("undefined"==typeof r?"undefined":i(r))&&void 0!=r.length&&r.length>0||o(r)&&"object"===("undefined"==typeof r?"undefined":i(r))&&void 0==r.length){
var l=function(e){var i="data-adhoc-stat-"+n.toLowerCase();if(!e.getAttribute(i)){V.push({name:n,ele:e,track:!1,isDefault:!1}),e.setAttribute(i,n);var r=e.tagName.toLowerCase(),s=e.getAttribute("type");s?s=s.toLowerCase():null;var u=e.getAttribute("target"),l=e.getAttribute("href");"a"==r&&a(u)&&o(l)&&l.indexOf("http")>-1||"input"==r&&"submit"==s||"input"==r&&"image"==s||"button"==r&&"submit"==s?G(e,n,V):I.addEvent(e,"click",function(){adhoc("track",n,1,function(){},!0)}),t.show(c)}};if(r.length&&r.length>=1)for(var d=0;d<r.length;d++)l(r[d]);else l(r)}else setTimeout(s)};setTimeout(r)}(n,e.statName)})})},W=function(e,t,n){w.each(e,function(e){w.each(e.doms,function(r){!function(e,r){var s=function c(){var s=void 0,u=void 0,l=void 0;if("domXpath"===e.mode,"class"===e.mode)for(var d=0;d<n.length;d++){l=e.id.split(" ");var h=n[d].getAttribute("class"),f=h?h.split(" "):[];(1==f.length&&h==e.id||f.length>=1&&h.indexOf(e.id)>-1)&&(s=n[d],u=l.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id)}if("id"===e.mode)for(var p=0;p<n.length;p++){l=e.id.split(" ");var m=n[p].getAttribute("id"),g=m?m.split(" "):[];(1==g.length&&m==e.id||g.length>=1&&m.indexOf(e.id)>-1)&&(s=n[p],u=l.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id)}if(e.mode&&e.id)for(var v=0;v<n.length;v++){l=e.id.split(" ");var w=n[v].getAttribute(e.mode),y=w?w.split(" "):[];(1==y.length&&w==e.id||y.length>=1&&w.indexOf(e.id)>-1)&&(s=n[v],u="["+e.mode+"='"+e.id+"']")}if(o(s)&&"object"===("undefined"==typeof s?"undefined":i(s))&&void 0!=s.length&&s.length>0||o(s)&&"object"===("undefined"==typeof s?"undefined":i(s))&&void 0==s.length){var b=function(e){var n="data-adhoc-stat-"+r.toLowerCase();if(!e.getAttribute(n)){V.push({name:r,ele:e,track:!1,isDefault:!1}),e.setAttribute(n,r);var i=e.tagName.toLowerCase(),s=e.getAttribute("type");s?s=s.toLowerCase():null;var c=e.getAttribute("target"),l=e.getAttribute("href");"a"==i&&a(c)&&o(l)&&l.indexOf("http")>-1||"input"==i&&"submit"==s||"input"==i&&"image"==s||"button"==i&&"submit"==s?G(e,r,V):I.addEvent(e,"click",function(){adhoc("track",r,1,function(){},!0)}),t.show(u)}};if(s.length&&s.length>=1)for(var x=0;x<s.length;x++)b(s[x]);else b(s)}else setTimeout(c)};setTimeout(s)}(r,e.statName)})})},G=function(t,n,i){var a=o(t.tagName)?t.tagName.toLowerCase():"";t.adhocVisualClicked=!1;var c=function(){try{if(t&&t.dispatchEvent){var e=r.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.dispatchEvent(e)}else t.click();for(var n=0;n<i.length;n++)i[n].isDefault=!1}catch(o){g(o)}};if("a"==a){var l=t.parentNode,d=I.next(t),h=t.cloneNode(!0);h.removeAttribute("onclick"),h.setAttribute("href","javascript:;"),I.addEvent(h,"click",function(i){s(t.adhocVisualClicked)||(o(i)&&u(i.preventDefault)?i.preventDefault():i.returnValue=!1,t.adhocVisualClicked=!0,adhoc("track",n,1,function(){t.adhocVisualClicked=!1;var n=h.getAttribute("href");"javascript:;"==n?c():e.location.href=n},!0))}),l.removeChild(t),l.insertBefore(h,d)}else{var f=I.findParentNodeByTag(t,"form");if(o(f)){var p=null;I.addEvent(t,"click",function(){p=t}),I.addEvent(f,"submit",function(e){if(!s(t.adhocVisualClicked)&&p==t){t.adhocVisualClicked=!0;for(var r=0;r<i.length;r++)if(i[r].name==n&&i[r].ele==t&&!i[r].track){o(e)&&u(e.preventDefault)?e.preventDefault():e.returnValue=!1;for(var a=[],l=0;l<i.length;l++)i[l].ele==t&&(a.push(i[l].name),i[l].track=!0);a.length>0&&!i[r].isDefault&&adhoc("track",a,1,function(){for(var e=0;e<i.length;e++)i[e].isDefault=!0;c(),t.adhocVisualClicked=!1;for(var n=0;n<i.length;n++)i[n].ele==t&&(i[n].track=!1)},!0);break}}})}else I.addEvent(t,"click",function(){adhoc("track",n,1,function(){},!0)})}},Y=function(e,t){w.each(e,function(e){Z(J(e.changes),t)})},J=function(e){for(var t=e.slice(),n=[],i=0,r=e.length;i<r;i++){for(var o=t[i],a=!1,s=i+1;s<r;s++){var c=t[s];if("src"==c.key&&"src"==o.key&&c.id==o.id&&c.type==o.type&&c.mode==o.mode){a=!0;break}}a||n.push(o)}return n},Q=void 0,Z=function(e,t){var n=[];w.each(e,function(e){!function(e){var i=void 0,r=function o(){var r=void 0,s=void 0;switch(e.mode){case"domXpath":r=I.$(e.id),i=t.xPath2Css(e.id);break;case"class":s=e.id.split(" "),r=s.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):I.getDoms("."+e.id),i=s.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id;break;case"id":s=e.id.split(" "),r=s.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):document.getElementById(e.id),i=s.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id;break;default:r=document.querySelectorAll("["+e.mode+"='"+e.id+"']"),i="["+e.mode+"='"+e.id+"']"}if(a(r)||d(r)&&0==r.length||0==r.length)return void(Q=setTimeout(o));var c=function(t){switch(e.type){case"attr":if(t.tagName&&"img"==t.tagName.toLowerCase()&&"src"==e.key.toLowerCase()){var i=void 0;n.indexOf(t)==-1&&(i=t.style.visibility),t.style.visibility="hidden",n.push(t);var r=new Image;r.onload=function(){t.setAttribute("src",e.val),setTimeout(function(){t.style.visibility=i},100),t.onload=function(){t.getAttribute("src")!=e.val&&t.setAttribute("src",e.val)}},r.onerror=function(){t.style.visibility=i},r.src=e.val}else t.setAttribute(e.key,e.val);break;case"html":t.outerHTML=e.val;break;case"text":I.isChildsOnlyText(t)?t.innerHTML=e.val:t.innerText=e.val;break;case"style":var o=void 0;"ie"==R.browser.toLowerCase()&&"7.0"==R.browser_version?(o=t.style.cssText||"",t.style.cssText=o+";"+e.val):(o=t.getAttribute("style")||"",t.setAttribute("style",o+";"+e.val));break;case"drag":var s=I.$(e.val),c=s.parentNode;"after"==e.key&&(s=I.next(s)),c.insertBefore(t,s);break;case"sequence":d(e.val)&&(w.each(I.getChildren(t),function(e,n){e&&(a(e.getAttribute(M))&&e.setAttribute(M,n),a(e.getAttribute(D))&&w.each(I.getChildren(t,e.tagName.toLowerCase()),function(e,t){a(e.getAttribute(D))&&e.setAttribute(D,t)}))}),w.each(e.val.reverse(),function(e){var n=I.getChildren(t);n[e]&&a(n[e].getAttribute(M))?t.insertBefore(n[e],n[0]):w.each(n,function(i){i.getAttribute(M)==e&&t.insertBefore(i,n[0])})}))}};if(r.length&&r.length>=1)for(var u=0;u<r.length;u++)c(r[u]);else c(r);t.show(i)};setTimeout(r)}(e)})},ee=function(e,t,n){w.each(e,function(e){te(J(e.changes),t,n)})},te=function(e,t,n){var i=[];w.each(e,function(e){!function(e){var r=void 0,o=function s(){var o=void 0,c=void 0;if("domXpath"===e.mode,"class"===e.mode)for(var u=0;u<n.length;u++){c=e.id.split(" ");var l=n[u].getAttribute("class");if(l){var h=l.split(" ");(1==h.length&&l==e.id||h.length>=1&&l.indexOf(e.id)>-1)&&(o=n[u],r=c.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id)}}if("id"===e.mode)for(var f=0;f<n.length;f++){c=e.id.split(" ");var p=n[f].getAttribute("id");if(p){var m=p.split(" ");(1==m.length&&p==e.id||m.length>=1&&p.indexOf(e.id)>-1)&&(o=n[f],r=c.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id)}}if(e.mode&&e.id)for(var g=0;g<n.length;g++){c=e.id.split(" ");var v=n[g].getAttribute(e.mode);if(v){var y=v.split(" ");(1==y.length&&v==e.id||y.length>=1&&v.indexOf(e.id)>-1)&&(o=n[g],r="["+e.mode+"='"+e.id+"']")}}if(a(o)||d(o)&&0==o.length||0==o.length)return void setTimeout(s);var b=function(t){switch(e.type){case"attr":if(t.tagName&&"img"==t.tagName.toLowerCase()&&"src"==e.key.toLowerCase()){var n=void 0;i.indexOf(t)==-1&&(n=t.style.visibility),t.style.visibility="hidden",i.push(t);var r=new Image;r.onload=function(){t.setAttribute("src",e.val),setTimeout(function(){t.style.visibility=n},100),t.onload=function(){t.getAttribute("src")!=e.val&&t.setAttribute("src",e.val)}},r.onerror=function(){t.style.visibility=n},r.src=e.val}else t.setAttribute(e.key,e.val);break;case"html":t.outerHTML=e.val;break;case"text":I.isChildsOnlyText(t)?t.innerHTML=e.val:t.innerText=e.val;break;case"style":var o=void 0;"ie"==R.browser.toLowerCase()&&"7.0"==R.browser_version?(o=t.style.cssText||"",t.style.cssText=o+";"+e.val):(o=t.getAttribute("style")||"",t.setAttribute("style",o+";"+e.val));break;case"drag":var s=I.$(e.val),c=s.parentNode;"after"==e.key&&(s=I.next(s)),c.insertBefore(t,s);break;case"sequence":d(e.val)&&(w.each(I.getChildren(t),function(e,n){e&&(a(e.getAttribute(M))&&e.setAttribute(M,n),a(e.getAttribute(D))&&w.each(I.getChildren(t,e.tagName.toLowerCase()),function(e,t){a(e.getAttribute(D))&&e.setAttribute(D,t)}))}),w.each(e.val.reverse(),function(e){var n=I.getChildren(t);n[e]&&a(n[e].getAttribute(M))?t.insertBefore(n[e],n[0]):w.each(n,function(i){i.getAttribute(M)==e&&t.insertBefore(i,n[0])})}))}};if(o.length&&o.length>=1)for(var x=0;x<o.length;x++)b(o[x]);else b(o);t.show(r)};setTimeout(o)}(e)})},ne=function(e){var t=new X,n=[],i=[],r=[];w.each(e,function(e){return!!a(e)||(d(e.changes)&&(w.each(e.changes,function(e){"domXpath"==e.mode&&i.push(t.xPath2Css(e.id))}),n.push(e)),void(d(e.stats)&&w.each(e.stats,function(e){"domXpath"==e.mode&&w.each(e.elemId,function(e){i.push(t.xPath2Css(e))}),r.push(e)})))}),t.hide.apply(t,i),$(r,t),Y(n,t);var o=document.getElementsByTagName("html")[0];o.addEventListener("DOMNodeInserted",function(e){setTimeout(function(){var i=e.target,r=e.target.children,o=i.attributes,a=[];if(o)for(var s=0;s<o.length;s++)a.push({mode:o[s].name,id:o[s].value});if(r&&r.length)for(var c=0;c<r.length;c++)for(var u=r[c].attributes,l=0;l<u.length;l++)a.push({mode:u[l].name,id:u[l].value});var d=[],h=[];w.each(n,function(e){for(var t=e.changes,n=e.stats,i=0;i<t.length;i++)for(var r=0;r<a.length;r++)if(a[r].mode==t[i].mode&&a[r].id==t[i].id){d.push(t[i]);break}for(var o=0;o<n.length;o++){for(var s=n[o].doms,c=[],u=0;u<s.length;u++)for(var l=0;l<a.length;l++)if(a[l].mode==s[u].mode&&a[l].id==s[u].id){c.push(s[u]);break}h.push({statName:n[o].statName,version:n[o].version,doms:c})}});var f=[{changes:d,stats:n.stats}],p=[i];if(r&&r.length)for(var m=0;m<r.length;m++)p.push(r[m]);for(var g=!1,v=0;v<h.length;v++)if(h[v].doms.length>0){g=!0;break}g&&W(h,t,p),d.length>0&&(clearTimeout(Q),ee(f,t,p))})},!1)},ie=function(t,n,i,r,u){return new x(function(l,d){var f=t.all(),p=oe(n);if(c(p))return d("no referrer in control group");var m=[],g=null;for(var w in f){var y=f[w],b=void 0;try{b=v.parse(y)}catch(x){continue}for(var _ in b){var k=b[_];if(!a(k)&&!a(k.mode)){var E="regex"==k.mode?k.regexp:k.url;if(s(ae(p,E,k.mode,u))){var S=e.navigator&&e.navigator.userAgent?e.navigator.userAgent:"";if(o(k.ua)&&c(new RegExp(k.ua,"i").test(S)))continue;var C=k.data||{};if(a(g)&&o(C.newPageUrl)&&n!=fe.SPLIT&&""!=C.newPageUrl){if(0!=C.newPageUrl.indexOf("http"))return void d("newPageUrl error!\n"+k.newPageUrl);g={newUrl:C.newPageUrl,originUrl:p}}else t.get(w);m.push(k.data)}}}}if(h(g)){var O=re(g,i,r);P.setName(g.originUrl);var T=Math.random();A({active:"replace",clientid:i,newpageurl:O,step:0,id:T}),e.location.replace(O),A({active:"replace",clientid:i,newpageurl:O,step:1,id:T}),setTimeout(function(){A({active:"replace",clientid:i,newpageurl:O,step:3,id:T}),d("redirect failed")},1e3)}else try{ne(m),l()}catch(x){d(x)}})},re=function(e,t,n){var i=e.newUrl,r=se(i)+("?"+pe.SPLIT+"="+t),a=E.getSearch(i);if(a&&(r+="&"+a.substr(1)),c(n)){var s=E.getSearch(e.originUrl).substr(1).split("&");w.each(s,function(e,t){(o(e)&&e.indexOf("adhoc")>-1||""==e)&&s.splice(t,1)}),s.length>0?r+="&"+s.join("&"):null}var u=E.getHash(i);return"#"==u?u="":"",r+=u},oe=function(t){var n=void 0;if(t==fe.SPLIT){if(n=P.getName(),!n||n.indexOf("http")<0)return!1}else n=e.location.href;var i=E.getProtocol(n),r=E.getHost(n),o=E.getPath(n),a=E.getHash(n),s=E.getSearch(n),c="";if(s.length>0&&0==s.indexOf("?")){var u=s.substr(1).split("&"),l=u.length;w.each(u,function(e,t){return""==e||e.indexOf("adhoc_force_client_id")>=0||(c+=e,void(t<l-1&&(c+="&")))}),c.length>0&&(c="?"+c)}return i+"//"+r+o+c+a},ae=function(e,t,n,i){switch(n){case"regex":return new RegExp(t.replace("?","\\?").replace(/\*/g,"\\S*")+"$").test(e);case"equal":if(s(i)){if(se(t)==se(e)&&E.getHash(t)==E.getHash(e)){var r="&"+E.getSearch(e).substr(1)+"&",o=E.getSearch(t).substr(1).split("&"),a=!0;return w.each(o,function(e){return""==e||(r.indexOf("&"+e+"&")<0?(a=!1,!1):void 0)}),a}return!1}if(t.indexOf("?")>-1||t.indexOf("#")>-1){var c=E.getProtocol(e)+E.getHost(e)+E.getPath(e)+E.getSearch(e)+E.getHash(e),u=E.getProtocol(t)+E.getHost(t)+E.getPath(t)+E.getSearch(t)+E.getHash(t);return c==u}return se(e)==se(t)}},se=function(e){return E.getProtocol(e)+"//"+E.getHost(e)+E.getPath(e)},ce="ADHOC_CROSS_PAGE_EXPIDS",ue=1800,le=function(){function e(t,i){n(this,e);var r=T.get(ce)||"[]";this.ids=v.parse(r),this.domain=t,this.duration=i||ue}return e.prototype.getCrossExpIds=function(){return this.ids},e.prototype.concatExp=function(e){var t=this;return w.each(e,function(e){w.uniquePush(t.ids,e)}),this.ids},e.prototype.save=function(e){w.uniquePush(this.ids,e),T.set(ce,v.stringify(this.ids),this.duration,this.domain)},e}(),de=function(){function e(){n(this,e),this.events={}}return e.prototype.on=function(e,t){this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this.events[i];if(void 0!=r)for(var o=0;o<r.length;o++)r[o].apply(null,t)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}(),he=de.getInstance(),fe={EDITOR:"editor",SPLIT:"split",FORCE_CLIENT:"force_client",NORMAL:"normal"},pe={SPLIT:"__adhoc_split_id__",FORCE_CLIENT:"adhoc_force_client_id",APP_KEY:"appKey"},me=function(){function t(){n(this,t),this.appKey=void 0,this.client=void 0,this.mode=void 0,this.exp=void 0,this.tracker=void 0,this.style=new X,this.crossExp=void 0,this.event=he,this.experimentCache=void 0}return t.prototype.init=function(t){var n={appKey:void 0,clientId:void 0,defaultFlags:{},custom:{},stopUrlParams:!1,filterUrlParams:!1,protocol:e.location.protocol,domain:"appadhoc.com",timeout:3e3,crossDomain:void 0,crossDomainDuration:void 0,experimentCache:!0};if(y.assign(n,t),a(n.appKey))return g("adhoc needs an appKey, get it from your abtesting web console please");if(o(this.appKey))return g("please just init adhoc once");this.appKey=n.appKey,this.client=new K(n.appKey,n.clientId),this.custom=n.custom||{},this.defaultFlags=h(n.defaultFlags)?n.defaultFlags:{},this.stopUrlParams=!!n.stopUrlParams,this.filterUrlParams=!!n.filterUrlParams,this.crossDomain=n.crossDomain,this.experimentCache=n.experimentCache,this.crossExp=new le(this.crossDomain,n.crossDomainDuration),H.domain=z.domain=n.domain,H.protocol=z.protocol=n.protocol,H.timeout=z.timeout=n.timeout,this.setOverlay(!0);var i=E.getQueryString(pe.SPLIT),r=E.getQueryString(pe.FORCE_CLIENT),s=/openSDK/.test(P.getName())?fe.EDITOR:i?fe.SPLIT:r?fe.FORCE_CLIENT:fe.NORMAL;switch(this.mode=s,s){case fe.EDITOR:E.getQueryString(pe.APP_KEY,P.getName())===this.appKey?(this.setOverlay(!1),F(this.appKey)._catch(function(e){g("init editor failed! \n "+e)})):(this.setOverlay(!1),alert("appkey error"));break;case fe.SPLIT:this.initSDK(i);break;case fe.FORCE_CLIENT:this.initSDK(r);break;case fe.NORMAL:default:this.initSDK()}},t.prototype.initSDK=function(e){var t=this,n=this.mode==fe.FORCE_CLIENT;this.mode==fe.SPLIT&&P.getName().indexOf("force_client_id")>0&&(n=!0),o(e)?this.client.update(e):"",this.exp=new H({appKey:this.appKey,clientId:this.client.getId(),custom:this.custom,noStorage:n,experimentCache:this.experimentCache,defaultFlags:this.defaultFlags,onMatch:function(e){t.event.trigger("MatchExperiment",e),t.tracker.track([e.id],"Event-GET_EXPERIMENT_FLAGS",1),t.event.trigger("Track",{statname:"PV",expids:[e.id],value:1}),t.crossDomain&&t.crossExp.save(e.id)}}).getFlags(function(e){ie(e,t.mode,t.client.getId(),t.stopUrlParams,t.filterUrlParams).then(function(){t.setOverlay(!1),t.event.trigger("rander")})._catch(function(e){t.event.trigger("rander"),t.setOverlay(!1),g(e)})}),this.tracker=new z({appKey:this.appKey,clientId:this.client.getId(),custom:this.custom})},t.prototype.getFlags=function(e){o(this.exp)?this.exp.getFlags(function(t){u(e)&&e(t)}):g("please try:\n\tadhoc('init', {appKey: 'your adhoc appKey'})")},t.prototype.track=function(e,t,n){if(o(this.tracker)){var i=this.crossExp.concatExp(this.exp.getMatchedExpIds());this.tracker.track(i,e,t,n),i&&0!=i.length&&this.event.trigger("Track",{statname:e,expids:i,value:t})}else u(n)?n("no matchedExpId"):"",g("please try:\n\tadhoc('init', {appKey: 'your adhoc appKey'})")},t.prototype.getMatchedExpIds=function(){return this.exp.getMatchedExpIds()},t.prototype.getMatchedExps=function(){return this.exp.getMatchedExps()},t.prototype.getCurClientId=function(){return this.client.id},t.prototype.corssTrack=function(e,t,n,i){var r=new z({appKey:e.appKey,clientId:e.clientid,custom:e.custom||{}});r.track(e.expids,t,n,i)},t.prototype.setOverlay=function(e){e||(this.setOverlay=function(){}),this.style[e?"hide":"show"]("*","body")},t.prototype.on=function(e,t){this.event.on(e,t)},t}();!function(){var e=void 0;me.getInstance=function(t){return a(e)&&(e=new me),e}}();var ge=me.getInstance(),ve=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift();try{if(a(i))return m("apiName is not defined");if("track"==i){var r=t[0],o=(new Date).getTime();if(s(t[3]));else{if(l(xe[r])&&o-xe[r]<3e3)throw new Error("please do not track one stat frequently");xe[r]=o}}switch(i){case"initSDK":break;case"show":return ye.apply(void 0,t);case"hide":return be.apply(void 0,t);default:if(a(this[i]))throw new Error("api: "+i+" is not exist");return this[i].apply(this,t)}}catch(c){g(c)}},we=new X,ye=function(){we.show.apply(we,arguments)},be=function(){we.hide.apply(we,arguments)},xe={},_e=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ve.apply(ge,t)};e.adhoc=_e,e.adhoc.init=function(e,t){adhoc("init",{appKey:e,clientId:t})},I.querySelectorPolyfill()}(window,document),t["true"]=e}({},function(){return this}());